{% extends "base.html" %}
{% load static %}
{% block content %}
<h2>–ü–∞–Ω–µ–ª—å –º–µ–Ω–µ–¥–∂–µ—Ä–∞</h2>

<!-- –í–æ–¥–∏—Ç–µ–ª–∏ -->
<section>
  <h3>–í–æ–¥–∏—Ç–µ–ª–∏</h3>
  <table>
    <thead>
      <tr>
        <th>–ò–º—è</th>
        <th>–¢–µ–ª–µ—Ñ–æ–Ω</th>
        <th>–°—Ç–∞—Ç—É—Å</th>
      </tr>
    </thead>
    <tbody>
      {% for driver in drivers %}
      <tr>
        <td>{{ driver.user.username }}</td>
        <td>{{ driver.phone }}</td>
        <td>
          {% if driver.is_busy %}
            <span style="color:#d9534f; font-weight:600;">üöö –ù–∞ –∑–∞–∫–∞–∑–µ</span>
          {% else %}
            <span style="color:#28a745; font-weight:600;">‚úÖ –°–≤–æ–±–æ–¥–µ–Ω</span>
          {% endif %}
        </td>
      </tr>
      {% empty %}
      <tr><td colspan="3">–ù–µ—Ç –≤–æ–¥–∏—Ç–µ–ª–µ–π</td></tr>
      {% endfor %}
    </tbody>
  </table>
</section>

<!-- –ó–∞—è–≤–∫–∏ -->
<section>
  <h3>–ó–∞—è–≤–∫–∏</h3>
  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>–û—Ç–∫—É–¥–∞</th>
        <th>–ö—É–¥–∞</th>
        <th>–í–æ–¥–∏—Ç–µ–ª—å</th>
        <th>–°—Ç–∞—Ç—É—Å</th>
      </tr>
    </thead>
    <tbody>
      {% for order in orders %}
      <tr>
        <td>#{{ order.id }}</td>
        <td>{{ order.from_address }}</td>
        <td>{{ order.to_address }}</td>
        <td>{% if order.driver %}{{ order.driver.user.username }}{% else %}-{% endif %}</td>
        <td>
          {% if order.status == "new" %}
            <span style="color:#007bff; font-weight:600;">–ù–æ–≤–∞—è</span>
          {% elif order.status == "in_progress" %}
            <span style="color:#d9534f; font-weight:600;">–í —Ä–∞–±–æ—Ç–µ</span>
          {% else %}
            <span style="color:#28a745; font-weight:600;">–ó–∞–≤–µ—Ä—à–µ–Ω–∞</span>
          {% endif %}
        </td>
      </tr>
      {% empty %}
      <tr><td colspan="5">–ó–∞—è–≤–æ–∫ –Ω–µ—Ç</td></tr>
      {% endfor %}
    </tbody>
  </table>
</section>

<!-- –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏ -->
<section>
  <h3>–°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É</h3>
  <form method="post" class="form-card">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit" class="btn">–°–æ–∑–¥–∞—Ç—å</button>
  </form>
</section>
{% endblock %}
